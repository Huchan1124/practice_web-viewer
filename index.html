<!DOCTYPE html>
<html lang="zh_TW">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>model-viewer_practice</title>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css'
        integrity='sha512-GQGU0fMMi238uA+a/bdWJfpUGKUkBdgfFdgBm72SUQ6BeyWjoY/ton0tEjH+OSH9iP4Dfh+7HM0I9f5eR0L/4w=='
        crossorigin='anonymous' />
    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <model-viewer id="color" src="./assets/mammoth/source/mammoth.glb" ar ar-modes="webxr scene-viewer quick-look"
        disable-zoom camera-controls auto-rotate shadow-intensity="1">

        <div class="progress-bar hide" slot="progress-bar">
            <div class="update-bar"></div>
        </div>
        <div class="controls" ,="" id="color-controls">
            <button data-color="1,0,0,1" class="btn btn-danger">Red</button>
            <button data-color="0,1,0,1" class="btn btn-success">Green</button>
            <button data-color="0,0,1,1" class="btn btn-primary">Blue</button>
        </div>
        <button slot="ar-button" class="ar-button">
            View in your space
        </button>
    </model-viewer>

    <!-- 
    <div class="ar-link">
        <a class="btn btn-warning fw-bold" rel="ar" href="./assets/mammoth/Mammoth.usdz">AR模式(iOS)</a>
    </div> -->





    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script>
    <script>
        const modelViewerColor = document.querySelector("model-viewer#color");

        document.querySelector('#color-controls').addEventListener('click', (event) => {
            // get color 值
            const colorString = event.target.dataset.color;

            if (!colorString) {
                return;
            }
            // 轉 color 矩陣(陣列) map有浮點數
            const color = colorString.split(',').map(numberString => parseFloat(numberString));

            // console.log('Changing color to: ', color);
            // 解構賦值 陣列
            const [material] = modelViewerColor.model.materials;
            // console.dir(modelViewerColor.model.materials)
            // setBaseColor() BaseColor 材質上色 
            material.pbrMetallicRoughness.setBaseColorFactor(color);
        });
    </script>

</body>

</html>